---
layout: post
title: Luna 崩盘分析与启发
description: 从原理出发写一篇分析 Terra 稳定币的文章。综合近一个月左右所闻所思，希望本文的分析能更好的帮助读者了解 Terra 以及算法稳定币系统。
tags: 区块链
---

# Luna 崩盘分析与启发

从5月初 Luna 暴跌，到5月底 DK 主导 Luna 的分叉，Luna 几乎霸占了数字货币新闻的每日头条。从市场和理论层面都有许多好的分析文章，但结合市场和技术的文章却比较有限。因此，我从原理出发写一篇分析 Terra 稳定币的文章。综合近一个月左右所闻所思，希望本文的分析能更好的帮助读者了解 Terra 以及算法稳定币系统。

> 日期：2022.6.5
> 
> 作者:litianc
>
> 阅读时长: 5 分钟

## 背景
5.9起，Terra 区块链上的核心资产 Luna 的价格发生了暴跌，价格连续3天下跌90%以上，由此被打上了“清零”的标签。最让人觉得险恶的是，在暴跌之前的3个月内 Luna 逆势上涨，市值窜到了前五。那么是什么导致了Luna的崩盘，在这场零和博弈中如何保护好自己的资产？我们需要了解市场反应、深入理解 Terra 的工作原理，并得出自己的结论。

## 市场反应
首先，混迹区块链行业多年，周围朋友的反应能一定程度代表市场的普遍反应。在Luna下跌期间，我观察到WX朋友圈里大体分为两类人：
- 第一类是看“瀑布”的吃瓜群众，在整合加密货币的历史上，第一次经历市值前5的加密资产出现99%的暴跌。
- 第二类是用数据说话的智者：
  - “梭哈的不是傻就是赌徒”
  - “ust在anchor的还有30多亿”
  - “不明真相的不要随便抄底（贴心地附上了流通量链接）”
结合市场情绪和微信好友的理性分析，我们初步得出结论：这次Luna的单边下跌，不仅仅是简单的杠杆作用，而有可能是规则设计缺陷导致的不可逆死亡螺旋。

从Terra的创始人Do Kwon（DK）的Twitter也印证了这一推论。他在Twitter上连发14条消息，无奈的表示了“UST持有者在开始挂钩之前退出，这是没有办法的。”

接着，我们来看看Terra如何工作。

## Terra是什么
Terra 是一条以 Cosmos SDK 为基础的区块链。在Terra中有几个重要概念：两种核心资产，即Luna、UST（全称TerraUSD，其他相似的资产还有TerraSDR、TerraKRW）；以及一种关键算法，即协议层定义的兑换机制。

### 核心资产
- Luna 是 Terra 区块链上的原生资产，作为交易手续费、社区治理投票、以及一个重要的功能：燃烧兑换另一种稳定币资产（如UST）。
- UST 是 Terra 区块链上定义的一种算法稳定币，它的设计目标是利用市场博弈自动保持该资产价值与美元的价值保持一致。同理还可以得到其他资产： TerraSDK、TerraKRW（Terra创始人DK为韩国人）。

### 协议兑换机制
UST能够成为一种稳定币与从协议层上定义了兑换市场密不可分，这也是我们说的关键“算法”。

Terra区块链在协议层定义了：Luna和UST的 “双向销毁铸造” 的兑换机制。这种机制保证了UST可以较好的稳定在1美元附近。

A、当1UST > 1美元时（如1.01美元），可以通过协议兑换销毁价值1美元Luna，来得到1个UST，然后卖出1UST得到1.01美元，获利0.01美元。

B、反过来，当1UST < 1美元时（如0.99美元），可以用0.99美元 买入 1UST，通过协议兑换销毁1个UST，得到价值1美元的Luna，然后卖出Luna得到1美元，获利0.01美元。

![](/images/posts/luna_analysis/Frame.png)

### UST的根本价值
UST的价值支撑在于为Luna买入的资金总额。在 Terra 出现之前，算法稳定币是 MakerDAO 一家独大，而 MakerDAO 设计了一套超额抵押机制，确保发行的 DAI 美元等价物流通市值明显小于抵押在 MakerDAO 合约里的ETH等数字资产的总市值。与MakerDAO 不同，Terra 创造性的提出了双向销毁铸币机制，将 UST 的总量由 Luna 的实时价格和参与铸造和销毁Luna的意愿挂钩。这么做带来两个显著改变。

第一，用于生产UST的 Luna 资产能够被充分使用。对于参与铸造UST的用户而言，手里的1美元 Luna 换回1美元的 UST。

第二，UST 的承兑力由Luna市场全体买方承担。实际上，除了买家的正向支撑作用，还需要考虑持有者的负面抛压作用。因此，某种意义上说，UST 由 Luna 的买家和持有者共同承兑。这是利益捆绑、同进同退的组织，真有 DAO 那味道了。

## 为什么归零

### Luna 归零说
既然 Luna 持有者是一个利益深度捆绑的组织，那么为什么会归零？这就关系到 Luna 设计上的死亡螺旋陷阱了。

基于UST稳定币的假设，Luna 的白皮书得出随着 UST 使用场景的推广，Luna 的数量会越来越少，持有者 Luna 的人会共享生态成果。似乎只要大家持续推广 UST，哪怕最终推广速度下降，只要使用UST的人数稳定，Luna也是可以长期持有的资产。

在喧闹嘈杂的市场中，Luna 的设计缺陷却被大多数人忽略甚至主观忽视。但热闹的背后，总有一双看透本质的眼睛。这一缺陷就在 Luna 引以为傲的 “双向销毁铸造” 算法中。根据算法设计，Luna 的总量实际上是没有固定上限的，在 Luna 价格高企的时候，用户可以以少量的 Luna 换取等值的 UST；当 Luna 价格迅速下跌后，用户用之前兑换到的 UST 可以铸造出比原本更多的 Luna，随着价差越大，这个 Luna 的总量增加效应可能出现指数级的变化。事实上，当5.9前后价格发生剧烈下降之后，Luna 实质上进入了剧烈通胀的通道，加上市场上各类金融衍生品和恐慌的心理，形成了
UST的快速挤兑，最终造成了实质性的崩溃。
![Luna走势](/images/posts/luna_analysis/markets-comment.png)

理论上，在崩盘后的任何时间点，UST 都有可能重新回锚，让 Luna 形成新的价值基础，但创始人 DK 依然公开表示无奈，最终选择抛弃 Luna，分叉重建这条路。也许从财务工具的角度可以得到更好的解释。

### Terra 的资产负债表
按照货币银行学的分析方法，Terra 可以被看作一家可以不断增发股权的公司，它有一张非常简单明了的资产负债表，如下图。在左侧资产端，这家公司拥有可以无限增发的公司股票；在右侧负债端，市面上流通的所有UST便是这家公司的负债（可转债）。“双向燃烧铸造”规则，便是资产和负债的转换器，转换条件比较“神奇”，债权人可在任何时候按实时市场价转成股权，UST的价值在转换通道中总是估值1美元。
![asset_loan_sheet](/images/posts/luna_analysis/terra2.png)
虽然每一时刻的资产和负债是等值变化的，但用于股权的市场价格 P 总是在变化，这张资产负债表要保持时刻平衡，就需要让x是一个变量。当 Pn -> 0 时，x+n1+n2+...nn -> ∞。

若投资人明知自身股权可能被严重稀释的情况下，抛出股权是最明智的选择，这时 P 继续下跌，导致市场稀释更加严重。相应的，UST 是这家公司的负债，公司股权可以无限增发的设定不能掩饰资不抵债的本质。所以当 Terra 公司的债务出现挤兑风险时，最佳策略是卖出股权和债权。

Luna 的规则为加剧下跌的市场提供继续做空的动机，进入到死亡螺旋的通道中。

### Luna 破灭资产哪去了？
Luna 这轮暴跌，比以往任何股票的暴跌都来得急，那么 Luna 暴跌后，市场上的资金凭空消失了吗？显然不是。在 Terra 系统中，UST 是一个隐藏得非常深的延迟器，当风险来临时，所有持有 UST 的用户等同于持有 Terra 这家公司的债务，而公司融到资金进了 Luna 早期持有者 LFG（Luna基金会）的账户，他们用于购买了 BTC 等成色更高的数字资产。另一边，Terra 的债务越积越多，而这个债务在市场上还可以较好的流动性作为美元等价物进行交易（稳定币属性）。直到暴雷，UST持有者兑换无门，Luna 持有者的股权份额被持续稀释。

高，实在是高。据LFG官方讲，这轮暴跌过程中，他们动用了上万个 BTC 用于救市。但有数据分析者提出强烈质疑，市场价格走势毫无救市的迹象。若干年后，这场罗生门案不知又会带来怎样的江湖风波，此处埋下了伏笔。
![image](/images/posts/luna_analysis/LFG.png)

## 总结
曲终人散，Luna 的故事随着官方分叉将告一段落。作为区块链行业从业人员，除看热闹外，充分掌握应用产品门道是非常有必要的。欢迎大家相互推荐学习～

抛开创始团队的人格问题，单从 Terra 采用市场博弈的原理，创造了非超额抵押的算法稳定币，已在数字货币历史上留下浓重的一笔。Luna 通过总量扩张提高资产利用率的设计启发了许多现在仍在正常运行的稳定币，如Frax（如有时间，我会再写一篇关于Frax的文章）。

某种意义上，稳定币的设计与法币有许多相似之处。加密货币最大的特性公开透明，对系统的健壮性提出了更严格的要求，仅仅依靠无尽的增长来实现安全是行不通的。因此，在 Luna 的原理和暴跌事件的启示下，这类非超额抵押算法像是一种工艺要求极高的炼金术，千锤百炼后方可一观。